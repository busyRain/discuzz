(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8a0175d2"],{"23b0":function(t,s,e){"use strict";var i=e("470e"),a=e.n(i);a.a},"3e4a":function(t,s,e){"use strict";var i=e("5275"),a=e.n(i);a.a},"470e":function(t,s,e){},"4d8c":function(t,s,e){"use strict";var i=e("a322"),a=e.n(i);a.a},5275:function(t,s,e){},a322:function(t,s,e){},bda7:function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{},[e("div",{staticClass:"top"},[e("display-block")],1),e("div")])},a=[],n=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("div",{staticClass:"board-box"},[e("div",{staticClass:"board-bg"}),e("div",{staticClass:"team-desc clearfix"},[e("div",{staticClass:"desc-left fl"},[e("div",{staticClass:"circle-img fl"},[e("img",{staticClass:"board-icon",attrs:{src:t.$IMG_URL+t.blockTop.imgurl}}),e("el-popover",{attrs:{placement:"right",trigger:"hover"}},[e("ul",{staticClass:"sectionList"},t._l(t.section,function(s,i){return e("li",{key:i,staticClass:"listLi"},[e("label",{staticClass:"fl"},[t._v(t._s(s.name))]),s.childList.length>0?e("div",{staticClass:"childUL"},t._l(s.childList,function(s,i){return e("router-link",{key:i,attrs:{to:{path:"/disList/"+s.id},tag:"a",target:"_blank"}},[t._v(t._s(s.name))])}),1):t._e()])}),0),e("el-button",{staticClass:"join-circle",attrs:{slot:"reference",size:"medium",round:""},slot:"reference"},[t._v("版块切换")])],1)],1),e("div",{staticClass:"circle-name fl"},[e("div",{staticClass:"club-name"},[t._v(t._s(t.blockTop.name))]),e("div",{staticClass:"club-desc"},[t._v(t._s(t.blockTop.synopsis))]),e("div",{staticClass:"club-desc-line"}),e("div",{staticClass:"club-fan"},[e("p",{staticClass:"fan-numb"},[e("span",{staticClass:"fan-text"},[t._v("贴数")]),e("b",[t._v(t._s(t.blockTop.topiccount))])]),e("p",{staticClass:"fan-numb"},[e("span",{staticClass:"fan-text"},[t._v("今日")]),e("b",[t._v(t._s(t.blockTop.todayTopiccount))])])])])]),e("div",{staticClass:"desc-right fr"},[e("el-button",{staticClass:"send-post",attrs:{round:"",size:"medium"},on:{click:t.openDialog}},[t._v("发新贴")])],1)]),e("div",{staticClass:"classify-list ",staticStyle:{"margin-left":"20px"}},[e("div",{staticClass:"classify-item"},[e("span",{staticClass:"classify-title"},[t._v("看贴：")]),e("div",{staticClass:"classify-list-out"},[e("ul",{staticClass:"classify-ul"},[e("li",{class:["classify-li",0==t.isessence?"on":""],on:{click:function(s){return t.toggleTab(!1)}}},[e("a",{staticClass:"classify-letter",attrs:{href:"javascript:;"}},[t._v("普通贴")])]),e("li",{class:["classify-li",1==t.isessence?"on":""],on:{click:function(s){return t.toggleTab(!0)}}},[e("a",{staticClass:"classify-letter",attrs:{href:"javascript:;"}},[t._v("精华贴")])])])])]),e("div",{staticClass:"classify-item"},[e("span",{staticClass:"classify-title"},[t._v("排序：")]),e("div",{staticClass:"classify-list-out"},[e("ul",{staticClass:"classify-ul"},[e("li",{class:["classify-li",4==t.orderbytype?"on":""],on:{click:function(s){return t.toggleSort(4)}}},[e("a",{staticClass:"classify-letter",attrs:{href:"javascript:;"}},[t._v("回复时间")])]),e("li",{class:["classify-li",3==t.orderbytype?"on":""],on:{click:function(s){return t.toggleSort(3)}}},[e("a",{staticClass:"classify-letter",attrs:{href:"javascript:;"}},[t._v("发布时间")])]),e("li",{class:["classify-li",1==t.orderbytype?"on":""],on:{click:function(s){return t.toggleSort(1)}}},[e("a",{staticClass:"classify-letter",attrs:{href:"javascript:;"}},[t._v("浏览次数")])])])])])])]),e("block-list",{attrs:{list:t.blockList,count:t.count,sectionid:t.blockTop.id},on:{getPage:t.getPage}})],1)},o=[],c=(e("7f7f"),e("96cf"),e("3b8d")),r=e("cebc"),l=e("62e4"),u=e("3191"),d=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{ref:"boardBox",staticClass:"board-box"},[e("div",{staticClass:"main"},[e("ul",{staticClass:"post-list"},t._l(t.list,function(s,i){return e("li",{key:i},[e("div",{staticClass:"post-title cleardis"},[e("router-link",{attrs:{to:{path:"/disDetail/"+s.id,query:{sectionid:t.sectionid}},tag:"a",target:"_blank"}},[t._v(t._s(s.title))]),s.isrecommend?e("span",{staticClass:"uscat_pt"},[t._v("\n            置顶\n          ")]):t._e(),s.isessence?e("span",{staticClass:"uscat_pt"},[t._v("\n            精\n          ")]):t._e()],1),e("div",{staticClass:"info2 cleardis"},[e("span",{staticClass:"fr"},[t._v("\n            发布于 \n            "),e("i",{staticClass:"change-time"},[t._v(t._s(t.$formatDate(s.ctime,"yyyy-MM-dd hh:mm:ss")))])]),e("a",{staticClass:"usre-avatar fl",attrs:{href:"javascript:;",target:"_blank"}},[e("el-image",{staticStyle:{width:"30px",height:"30px","border-radius":"50%","margin-right":"10px",cursor:"pointer"},attrs:{src:t.$IMG_URL+s.userImgUrl,fit:"contain"}},[e("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[e("i",{staticClass:"el-icon-picture-outline"})])]),e("span",{staticClass:"author"},[t._v(t._s(s.nickName))])],1)]),e("div",{staticClass:"price"},[e("strong",[t._v(t._s(s.viewcount))]),t._v("浏览\n          "),e("strong",[t._v(t._s(s.replycount))]),t._v("回复\n        ")])])}),0),e("div",{staticClass:"page"},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:4}},[e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.addBlock}},[t._v("发表")])],1),e("el-col",{attrs:{span:16}},[e("el-pagination",{attrs:{background:"",layout:"prev,pager,next,jumper","page-size":t.limit,total:t.count},on:{"current-change":t.handleCurrentChange}})],1)],1)],1)]),e("div",{staticClass:"scroll-top-btn"},[e("ul",[e("li",{on:{click:t.goTop}},[t._m(0),e("span",[t._v("top")])]),e("li",{on:{click:t.addBlock}},[e("em",[t._v("快速")]),e("em",[t._v("发贴")])])])]),e("show-add",{attrs:{show:t.isShowAdd,id:t.id},on:{cancel:t.cancel}})],1)},p=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("span",{staticClass:"iconbtn"},[e("i",{staticClass:"el-icon-arrow-up"})])}],f=e("2f62"),h=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("el-dialog",{attrs:{visible:t.isShowAdd,title:"发表贴子",center:"","before-close":t.cancel}},[e("div",{staticClass:"editor-container"},[e("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"80px"}},[e("el-form-item",{attrs:{label:"标题"}},[e("el-input",{model:{value:t.title,callback:function(s){t.title=s},expression:"title"}})],1)],1),e("ueditor",{ref:"ue",attrs:{defaultMsg:t.defaultMsg,config:t.config}}),e("el-button",{staticClass:"add",attrs:{type:"primary",size:"medium"},on:{click:function(s){return t.save("form")}}},[t._v("发表贴子")])],1)])],1)},g=[],m=e("b676"),v=e("24a3"),b={props:["show"],components:{ueditor:m["a"]},computed:Object(r["a"])({},Object(f["b"])({isShowAdd:"isShowAdd"})),data:function(){return{form:{},defaultMsg:"",title:"",config:{toolbars:[["undo","redo","removeformat","formatmatch","|","paragraph","fontsize","|","bold","italic","underline","|","insertorderedlist","insertunorderedlist","|","indent","justifyleft","justifycenter","justifyright","justifyjustify","|","simpleupload","horizontal","|"]],insertorderedlist:{decimal:"1,2,3...","lower-alpha":"a,b,c...","lower-roman":"i,ii,iii...","upper-alpha":"A,B,C...","upper-roman":"I,II,III..."},insertunorderedlist:{circle:"○ 大圓圈",disc:"● 小黑點",square:"■ 小方塊 ",dash:"— 破折號"},paragraph:{h2:"标题 1",h3:"标题 2",h4:"标题 3"},fontsize:[14,16,18,20,24]},rules:{title:[{required:!0,message:"请输入标题",trigger:"blur"}]}}},methods:{cancel:function(){this.$emit("cancel",!1)},save:function(t){var s=this;this.$refs[t].validate(function(t){if(t){var e={sid:parseInt(s.$route.params.id),title:s.title,content:s.$refs.ue.getUEContent()};s.add(e)}})},add:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(s){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,v["a"](s).then(function(t){console.log(t),0==t.code&&(e.$emit("cancel",!1),e.title="",e.defaultMsg="",e.$refs.ue.setContent(""))});case 2:case"end":return t.stop()}},t)}));function s(s){return t.apply(this,arguments)}return s}()}},y=b,_=(e("3e4a"),e("2877")),C=Object(_["a"])(y,h,g,!1,null,"2dca9235",null),k=C.exports,w={name:"blockList",props:["list","count","sectionid"],data:function(){return{id:"",page:1,limit:80,orderbytype:1,isShowAdd:!1,loginStatus:!1}},components:{showAdd:k},computed:{},methods:{goTop:function(){document.body.scrollTop=document.documentElement.scrollTop=0},init:function(){localStorage.getItem("token")?this.loginStatus=!0:this.loginStatus=!1},handleCurrentChange:function(t){console.log(t),document.body.scrollTop=document.documentElement.scrollTop=0,this.$emit("getPage",t)},cancel:function(t){this.$store.dispatch("getIsShowAdd",t),this.$emit("getPage",1)},addBlock:function(){this.loginStatus?(this.id=this.$route.params.id,this.$store.dispatch("getIsShowAdd",!0),this.$refs.boardBox.scrollTop=0):this.$router.push({path:"/login"})}},mounted:function(){},created:function(){this.init()}},S=w,$=(e("4d8c"),Object(_["a"])(S,d,p,!1,null,"11119b9d",null)),x=$.exports,j={name:"displayBlock",components:{blockList:x},data:function(){return{isessence:!1,orderbytype:4,page:1,limit:80,sectionid:"",blockList:{},blockTop:{},count:0,loginStatus:!1,section:{}}},computed:Object(r["a"])({},Object(f["b"])({isShowAdd:"isShowAdd"})),methods:{getPage:function(t){this.page=t,this.getBlockList()},toggleTab:function(t){this.isessence=t,this.page=1,this.getBlockList()},toggleSort:function(t){this.orderbytype=t,this.page=1,this.getBlockList()},openDialog:function(){this.loginStatus?this.$store.dispatch("getIsShowAdd",!0):this.$router.push({path:"/login"})},getBlockList:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(){var s=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,l["a"]({page:this.page,limit:this.limit,orderbytype:this.orderbytype,isessence:this.isessence,sectionid:this.sectionid}).then(function(t){var e=t.data;0==t.code&&(s.blockList=e,s.count=t.count)});case 2:case"end":return t.stop()}},t,this)}));function s(){return t.apply(this,arguments)}return s}(),getBlockTop:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(s){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return console.log(s),t.next=3,l["b"](s).then(function(t){var s=t.data;if(0==t.code){e.blockTop=s;var i=[];i.push({url:e.$route.path,name:e.blockTop.name}),sessionStorage.setItem("navList",JSON.stringify(i)),console.log(JSON.parse(sessionStorage.getItem("navList")))}});case 3:case"end":return t.stop()}},t)}));function s(s){return t.apply(this,arguments)}return s}(),init:function(){var t=this.$getCookie("uInfo"),s=JSON.parse(t);s&&s.token?this.loginStatus=!0:this.loginStatus=!1},getSection:function(){var t=Object(c["a"])(regeneratorRuntime.mark(function t(){var s=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u["b"]().then(function(t){var e=t.data;0==t.code&&(s.section=e)});case 2:case"end":return t.stop()}},t)}));function s(){return t.apply(this,arguments)}return s}()},mounted:function(){this.init()},created:function(){sessionStorage.removeItem("navList"),this.sectionid=this.$route.params.id,this.getSection(),this.getBlockList(),this.getBlockTop(this.$route.params.id)}},L=j,T=(e("23b0"),Object(_["a"])(L,n,o,!1,null,"60c8bf27",null)),I=T.exports,B={name:"display",components:{displayBlock:I,blockList:x}},O=B,A=Object(_["a"])(O,i,a,!1,null,null,null);s["default"]=A.exports}}]);