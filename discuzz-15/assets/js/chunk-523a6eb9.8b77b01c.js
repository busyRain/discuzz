(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-523a6eb9"],{"37eb":function(e,o,r){"use strict";var s=r("8422"),t=r.n(s);t.a},8422:function(e,o,r){},"996a":function(e,o,r){"use strict";r.r(o);var s=function(){var e=this,o=e.$createElement,r=e._self._c||o;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading.status,expression:"loading.status"}],staticClass:"bg-wrap",attrs:{"element-loading-text":e.loading.msg,"element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.6)"}},[r("div",{staticClass:"con-wrap"},[r("div",{staticClass:"con-inner"},[r("h1",[e._v("找回密码")]),r("ul",{staticClass:"tab"},[r("li",{staticClass:"cursor",class:1==e.tab?"active":"",on:{click:function(o){return e.changeTab(1)}}},[e._v("通过短信找回")]),r("li",{staticClass:"cursor",class:2==e.tab?"active":"",on:{click:function(o){return e.changeTab(2)}}},[e._v("通过邮箱找回")])]),1==e.tab?r("div",{staticClass:"tab1"},[r("p",[e._v("请输入注册时绑定的手机号码，我们会马上把确认短信发送给您")]),r("el-form",{ref:"formMobile",attrs:{model:e.formMobile,rules:e.rulesMobile}},[r("el-form-item",{attrs:{prop:"userPhone"}},[r("div",{staticClass:"input-wrap input-key"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.formMobile.userPhone,expression:"formMobile.userPhone"}],attrs:{type:"tel",maxlength:"11",placeholder:"请填写手机号码"},domProps:{value:e.formMobile.userPhone},on:{input:function(o){o.target.composing||e.$set(e.formMobile,"userPhone",o.target.value)}}}),r("div",{staticClass:"btn cursor",domProps:{textContent:e._s(e.formMobile.counter.text)},on:{click:e.sendMobileMessage}})])]),r("el-form-item",{attrs:{prop:"vCode"}},[r("div",{staticClass:"input-wrap"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.formMobile.vCode,expression:"formMobile.vCode"}],attrs:{type:"text",placeholder:"请填写手机验证码"},domProps:{value:e.formMobile.vCode},on:{input:function(o){o.target.composing||e.$set(e.formMobile,"vCode",o.target.value)}}})])]),r("el-form-item",{attrs:{prop:"passWord"}},[r("div",{staticClass:"input-wrap"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.formMobile.passWord,expression:"formMobile.passWord"}],attrs:{type:"password",placeholder:"请填写新密码(6-20位字母与字母或符号组成)"},domProps:{value:e.formMobile.passWord},on:{input:function(o){o.target.composing||e.$set(e.formMobile,"passWord",o.target.value)}}})])]),r("el-form-item",{attrs:{prop:"surePassword"}},[r("div",{staticClass:"input-wrap"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.formMobile.surePassword,expression:"formMobile.surePassword"}],attrs:{type:"password",placeholder:"请重复新密码"},domProps:{value:e.formMobile.surePassword},on:{input:function(o){o.target.composing||e.$set(e.formMobile,"surePassword",o.target.value)}}})])])],1)],1):e._e(),2==e.tab?r("div",{staticClass:"tab1"},[r("p",[e._v("请输入注册时绑定的邮箱，我们会马上把确认短信发送给您")]),r("el-form",{ref:"formEmail",attrs:{model:e.formEmail,rules:e.rulesEmail}},[r("el-form-item",{attrs:{prop:"userEmail"}},[r("div",{staticClass:"input-wrap input-key"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.formEmail.userEmail,expression:"formEmail.userEmail"}],attrs:{type:"email",placeholder:"请填写邮箱验"},domProps:{value:e.formEmail.userEmail},on:{input:function(o){o.target.composing||e.$set(e.formEmail,"userEmail",o.target.value)}}}),r("div",{staticClass:"btn cursor",domProps:{textContent:e._s(e.formEmail.counter.text)},on:{click:e.sendEmailMessage}})])]),r("el-form-item",{attrs:{prop:"emailCode"}},[r("div",{staticClass:"input-wrap"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.formEmail.emailCode,expression:"formEmail.emailCode"}],attrs:{type:"text",placeholder:"请填写邮箱验验证码"},domProps:{value:e.formEmail.emailCode},on:{input:function(o){o.target.composing||e.$set(e.formEmail,"emailCode",o.target.value)}}})])]),r("el-form-item",{attrs:{prop:"passWord"}},[r("div",{staticClass:"input-wrap"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.formEmail.passWord,expression:"formEmail.passWord"}],attrs:{type:"password",placeholder:"请填写新密码(6-20位字母与字母或符号组成)"},domProps:{value:e.formEmail.passWord},on:{input:function(o){o.target.composing||e.$set(e.formEmail,"passWord",o.target.value)}}})])]),r("el-form-item",{attrs:{prop:"surePassword"}},[r("div",{staticClass:"input-wrap"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.formEmail.surePassword,expression:"formEmail.surePassword"}],attrs:{type:"password",placeholder:"请重复新密码"},domProps:{value:e.formEmail.surePassword},on:{input:function(o){o.target.composing||e.$set(e.formEmail,"surePassword",o.target.value)}}})])])],1)],1):e._e(),r("div",{staticClass:"tab1"},[r("div",{staticClass:"submit-wrap cursor"},[r("div",{staticClass:"btn",on:{click:e.doSubmit}},[e._v("重置密码")])])])])])])},t=[],a={data:function(){var e=this;return{tab:1,loading:{status:!1,msg:"正在验证并重置密码~"},formMobile:{userPhone:"",passWord:"",surePassword:"",vCode:"",counter:{text:"发送手机验证码",seconds:120,func:null}},formEmail:{userEmail:"",passWord:"",surePassword:"",emailCode:"",counter:{text:"发送邮箱验证码",seconds:120,func:null}},rulesMobile:{userPhone:[{validator:function(e,o,r){return o?/^(13[0-9]|14[0-9]|15[0-9]|17[0-9]|18[0-9]|19[0-9]|16[0-9])\d{8}$/.test(o)?void(r&&r()):r(new Error("请输入正确的手机号")):r(new Error("请输入手机号"))},trigger:"blur"}],passWord:[{validator:function(o,r,s){if(!r)return s(new Error("请输入密码"));r.length<6||r.length>20?s(new Error("6-20位字母与字母或符号组成")):""!==r&&e.$refs.formMobile.validateField("surePassword"),s&&s()},trigger:"blur"}],surePassword:[{validator:function(o,r,s){""===r?s(new Error("请再次输入密码")):r!==e.formMobile.passWord?s(new Error("两次输入密码不一致!")):s()},trigger:"blur"}],vCode:[{validator:function(e,o,r){""===o&&r(new Error("请短信验证码")),r&&r()},trigger:"blur"}]},rulesEmail:{userEmail:[{validator:function(e,o,r){return o?/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.[a-zA-Z0-9]{2,6}$/.test(o)?void(r&&r()):r(new Error("请输入正确的邮箱")):r(new Error("请输入邮箱"))},trigger:"blur"}],passWord:[{validator:function(o,r,s){if(!r)return s(new Error("请输入密码"));r.length<6||r.length>20?s(new Error("6-20位字母与字母或符号组成")):""!==r&&e.$refs.formEmail.validateField("surePassword"),s&&s()},trigger:"blur"}],surePassword:[{validator:function(o,r,s){""===r?s(new Error("请再次输入密码")):r!==e.formEmail.passWord?s(new Error("两次输入密码不一致!")):s()},trigger:"blur"}],emailCode:[{validator:function(e,o,r){""===o&&r(new Error("请邮箱验证码")),r&&r()},trigger:"blur"}]}}},methods:{sendMobileMessage:function(){var e=this;0!=e.formMobile.counter.seconds&&120!=e.formMobile.counter.seconds||e.$refs.formMobile.validateField("userPhone",function(o){o||(e.loading.status=!0,e.loading.msg="正在发送手机验证码~",e.$post("users/sendPhoneVerificationCode",{userPhone:e.formMobile.userPhone}).then(function(o){0==o.code&&e.$alert("手机验证码发送成功",{confirmButtonText:"确定",callback:function(o){e.loading.status=!1,e.formMobile.counter.func=setInterval(function(){0==e.formMobile.counter.seconds&&(clearInterval(e.formMobile.counter.func),e.formMobile.counter.text="重新发送验证码",e.formMobile.counter.seconds=120),e.formMobile.counter.text="重新发送验证码("+e.formMobile.counter.seconds+")",e.formMobile.counter.seconds--},1e3)}})}))})},sendEmailMessage:function(){var e=this;0!=e.formEmail.counter.seconds&&120!=e.formEmail.counter.seconds||e.$refs.formEmail.validateField("userEmail",function(o){o||(e.loading.status=!0,e.loading.msg="正在发送邮箱验证码~",e.$post("users/sendEmailVerificationCode",{userEmail:e.formEmail.userEmail}).then(function(o){0==o.code&&e.$alert("邮箱验证码发送成功",{confirmButtonText:"确定",callback:function(o){e.loading.status=!1,e.formEmail.counter.func=setInterval(function(){0==e.formEmail.counter.seconds&&clearInterval(e.formEmail.counter.func),e.formEmail.counter.text="重新发送验证码("+e.formEmail.counter.seconds+")",e.formEmail.counter.seconds--},1e3)}})}))})},onSuccess:function(e,o){var r=this;if(0==o.code){var s={token:o.data,loginName:1==e?this.formMobile.userPhone:this.formEmail.userEmail};r.$setCookie("uInfo",JSON.stringify(s)),r.$message({message:o.msg,type:"success",duration:3e3})}else{r.loading.status=!1;var t="";t=200==o.status?o.msg:o.message,r.$alert(t,{confirmButtonText:"确定"})}},doSubmit:function(){var e=this,o=this;1==this.tab?this.$refs.formMobile.validate(function(r){if(!r)return!1;o.loading.status=!0,e.$post("/users/forgetPassWord",{userPhone:o.formMobile.userPhone,newPassWord:o.formMobile.passWord,vCode:o.formMobile.vCode}).then(function(e){o.onSuccess(1,e)})}):2==this.tab&&this.$refs.formEmail.validate(function(r){if(!r)return!1;o.loading=!0,e.$axios.post("/users/forgetPassWordFromEmail",{userEmail:o.formEmail.userEmail,newPassWord:o.formEmail.passWord,vCode:o.formEmail.emailCode}).then(function(e){o.onSuccess(2,e)})})},changeTab:function(e){var o=this;this.tab=e,1==this.tab?(this.formMobile.userPhone="",this.formMobile.passWord="",this.formMobile.surePassword="",this.formMobile.vCode="",setTimeout(function(){o.$refs.formMobile.resetFields()},10)):(this.formEmail.userEmail="",this.formEmail.passWord="",this.formEmail.surePassword="",this.formEmail.emailCode="",setTimeout(function(){o.$refs.formEmail.resetFields()},10))}}},i=a,n=(r("37eb"),r("2877")),l=Object(n["a"])(i,s,t,!1,null,"357a2000",null);o["default"]=l.exports}}]);